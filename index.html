<style>
  #error_reload {
    display: none;
  }
</style>
<body onerror="errorstat();">
  <script src="jsvm.js"></script>
  <h1>
   Android online
  </h1>
  <div id="e">
    <div style="white-space: pre; font: 14px monospace; line-height: 14px"></div>
    <canvas onclick="this.requestPointerLock();" style="display: none"></canvas>
</div>
<br></br>
<small id="status"></small>
<button onclick="location.reload()" id="error_reload">Reload</button>
  <script>
       function status(t){
      document.getElementById("status").innerText = "Status: " + t;
    }

    
    window.errorstat = function(){
           document.getElementById("status").innerText = "Status: Error while running VM, halted. Check console for information or reload to run again.";
     document.getElementById("status").style.color = "rgb(255,0,0)";   
      document.getElementById("error_reload").style.display = "block";
    }
    
    status("Loading android-x86 Froyo disk image state... (This will take a long time to load because the disk image is very big (about 250MB), so be patient...)")
    const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    if (entry.initiatorType === "xmlhttprequest") {
if (entry.name == location.origin + "/android_froyo.bin"){
 status("Loaded VM image") 
}
    }
  }
});

observer.observe({
  entryTypes: ["resource"]
});
    
  var h=new V86Starter({
        screen_container: e,
        bios: {
            url: "https://cdn.glitch.com/d1197e36-c33d-426e-8e04-8bcd831e3db9%2Fseabios.bin?v=1617253300346",
        },
        vga_bios: {
            url: "https://cdn.glitch.com/d1197e36-c33d-426e-8e04-8bcd831e3db9%2Fvgabios.bin?v=1617253288370",
        },
        initial_state: { 
        url: "android_froyo.bin",
        },
       memory_size: 512 * 1024 * 1024,
         vga_memory_size: 256 * 1024 * 1024,
        autostart: true
  });
  </script>
</body>